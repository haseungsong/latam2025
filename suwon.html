<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Day 1 ‚Äî Samsung Digital City (Suwon)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .no-scrollbar::-webkit-scrollbar{display:none}
    .no-scrollbar{-ms-overflow-style:none;scrollbar-width:none}
    .pb-safe { padding-bottom: max(env(safe-area-inset-bottom), 16px); }
  </style>
</head>
<body class="bg-slate-50 text-slate-900">

<!-- Î™®Îã¨ -->
<div id="day1Modal" class="fixed inset-0 hidden items-end sm:items-center justify-center z-50">
  <!-- backdrop -->
  <div class="absolute inset-0 bg-black/60" id="closeBackdrop"></div>
  <!-- sheet card -->
  <div class="relative w-full sm:max-w-md bg-white rounded-t-3xl sm:rounded-3xl shadow-xl max-h-[92vh] overflow-hidden">
    <!-- Ìó§Îçî -->
    <header class="sticky top-0 z-10 bg-white/80 backdrop-blur border-b border-slate-200">
      <div class="px-4 py-3">
        <div class="text-xs tracking-wide text-slate-500">Day 1 ¬∑ Suwon</div>
        <h1 class="text-lg font-bold">Samsung Digital City ‚Äî Visitor Schedule</h1>

        <!-- Group ÏÑ†ÌÉù ÌÜ†Í∏Ä -->
        <div class="mt-3 flex items-center gap-2">
          <div class="inline-flex p-1 rounded-full bg-slate-100 ring-1 ring-slate-200" role="tablist">
            <button class="gbtn px-3 py-1.5 rounded-full text-sm font-medium" data-g="1">Group 1</button>
            <button class="gbtn px-3 py-1.5 rounded-full text-sm font-medium" data-g="2">Group 2</button>
            <button class="gbtn px-3 py-1.5 rounded-full text-sm font-medium" data-g="3">Group 3</button>
          </div>
          <div class="ml-auto">
            <button id="closeDay1" class="px-3 py-1.5 rounded-lg text-slate-600 hover:bg-slate-100">Close</button>
          </div>
        </div>

        <!-- Ïò§Îäò ÏïàÎÇ¥ Î∞∞ÏßÄ -->
        <div id="todayBadge" class="mt-2 flex flex-wrap gap-2 text-xs"></div>
      </div>
    </header>

    <!-- Î≥∏Î¨∏: ÌÉÄÏûÑÎùºÏù∏ -->
    <main id="timeline" class="p-4 space-y-3 overflow-y-auto max-h-[80vh]">
      <!-- JS Î†åÎçîÎßÅ -->
    </main>

    <!-- ÌïòÎã® ÎÖ∏Ìä∏ -->
    <section class="p-4 border-t border-slate-200 text-xs bg-slate-50">
      <div class="font-semibold mb-1">Notes</div>
      <ul class="list-disc pl-4 space-y-1">
        <li>SIM guided tour (max 30 pax/slot): 11:00 (Spanish), 13:30 (English), 14:00 (Spanish).</li>
        <li>Groups: G1 = SELA+SEM ¬∑ G2 = SEDA+SAMCOL ¬∑ G3 = SECH+SEPR+SEASA.</li>
        <li>Lunch at R5; VIP rooms in R4 (booking available from September).</li>
        <!-- üîÑ Î≤ÑÌäºÏúºÎ°ú PDF Î∑∞Ïñ¥ Ïó¥Í∏∞ -->
        <li>
          <button class="text-blue-600 underline"
                  onclick="openPdf('assets/SIM_Brochure_english.pdf?v=2')">
            SIM Brochure
          </button>
        </li>
      </ul>
    </section>

    <!-- ‚úÖ Î™®Îã¨ Ïπ¥Îìú ÏïàÏóê Î∞∞Ïπò (Notes ÏïÑÎûò) -->
    <div class="p-4 pt-0 text-right">
      <a href="index.html" class="text-sm text-blue-600 underline">‚Üê Back to Home</a>
    </div>
  </div>
</div>

<script>
/* ---------- 1) Îç∞Ïù¥ÌÑ∞ (Í∑∏Î£πÎ≥Ñ ÏàúÏÑú/ÏãúÍ∞Ñ) ---------- */
const COLORS = {
  MX:   "bg-blue-600 text-white",
  SIM:  "bg-slate-700 text-white",
  VD:   "bg-orange-600 text-white",
  DA:   "bg-yellow-400 text-slate-900",
  LUNCH:"bg-emerald-100 text-emerald-900",
  MOVE: "bg-slate-200 text-slate-800",
  B2C:  "bg-slate-300 text-slate-900",
  BSS:  "bg-slate-300 text-slate-900",
};

const GROUPS = {
  1: [
    { t:"10:20‚Äì11:00",  k:"MX",   title:"Mobile Experience (MX)",     act:"Showroom tour" },
    { t:"11:00‚Äì12:10",  k:"SIM",  title:"Samsung Innovation Museum",  act:"Guided tour (max 30)" , link:"assets/SIM_Brochure_english.pdf?v=2"},
    { t:"12:10‚Äì13:10",  k:"LUNCH",title:"Lunch",                      act:"R5 dining (VIP in R4)" },
    { t:"13:10‚Äì13:50",  k:"VD",   title:"Visual Display (VD)",        act:"Briefing / visit" },
    { t:"13:50‚Äì14:30",  k:"DA",   title:"Digital Appliances (DA)",    act:"Briefing / visit" },
    { t:"14:30‚Äì15:00",  k:"MOVE", title:"Move",                       act:"Transfer to briefing hall" },
    { t:"15:00‚Äì15:20",  k:"B2C",  title:"B2C Briefing",               act:"Presentation" },
    { t:"15:20‚Äì15:50",  k:"BSS",  title:"BSS Briefing",               act:"Presentation" },
  ],
  2: [
    { t:"10:20‚Äì11:00",  k:"VD",   title:"Visual Display (VD)",        act:"Briefing / visit" },
    { t:"11:00‚Äì11:40",  k:"MX",   title:"Mobile Experience (MX)",     act:"Showroom tour" },
    { t:"11:40‚Äì12:40",  k:"LUNCH",title:"Lunch",                      act:"R5 dining (VIP in R4)" },
    { t:"12:40‚Äì13:20",  k:"DA",   title:"Digital Appliances (DA)",    act:"Briefing / visit" },
    { t:"13:30‚Äì14:40",  k:"SIM",  title:"Samsung Innovation Museum",  act:"Guided tour (max 30)" , link:"assets/SIM_Brochure_english.pdf?v=2"},
    { t:"14:50‚Äì15:20",  k:"MOVE", title:"Move",                       act:"Transfer to briefing hall" },
    { t:"15:20‚Äì15:40",  k:"B2C",  title:"B2C Briefing",               act:"Presentation" },
    { t:"15:40‚Äì16:10",  k:"BSS",  title:"BSS Briefing",               act:"Presentation" },
  ],
  3: [
    { t:"10:20‚Äì11:00",  k:"DA",   title:"Digital Appliances (DA)",    act:"Briefing / visit" },
    { t:"11:00‚Äì11:40",  k:"VD",   title:"Visual Display (VD)",        act:"Briefing / visit" },
    { t:"11:40‚Äì13:00",  k:"LUNCH",title:"Lunch & Break",              act:"R5 dining (VIP in R4)" },
    { t:"13:00‚Äì13:40",  k:"MX",   title:"Mobile Experience (MX)",     act:"Showroom tour" },
    { t:"14:00‚Äì15:10",  k:"SIM",  title:"Samsung Innovation Museum",  act:"Guided tour (max 30)" , link:"assets/SIM_Brochure_english.pdf?v=2"},
    { t:"15:10‚Äì15:40",  k:"MOVE", title:"Move",                       act:"Transfer to briefing hall" },
    { t:"15:40‚Äì16:00",  k:"B2C",  title:"B2C Briefing",               act:"Presentation" },
    { t:"16:00‚Äì16:30",  k:"BSS",  title:"BSS Briefing",               act:"Presentation" },
  ],
};

/* ---------- 2) Î†åÎçî ---------- */
const timeline = document.getElementById("timeline");
const badge    = document.getElementById("todayBadge");
let currentG   = localStorage.getItem("day1_group") || "1";

function setActiveGroupUI(){
  document.querySelectorAll(".gbtn").forEach(b=>{
    const on = b.dataset.g === currentG;
    b.classList.toggle("bg-white", on);
    b.classList.toggle("shadow", on);
    b.setAttribute("aria-selected", on ? "true":"false");
  });
}

function renderBadge(items){
  const hasSIM = items.some(i=>i.k==="SIM");
  const simText = hasSIM ? "¬∑ SIM guided slot today" : "";
  badge.innerHTML = `
    <div class="inline-flex items-center gap-2 px-2 py-1 rounded-full bg-slate-100 ring-1 ring-slate-200">
      <span class="inline-block w-2 h-2 rounded-full bg-slate-800"></span>
      <span><strong>Selected:</strong> Group ${currentG} ${simText}</span>
    </div>`;
}

function renderTimeline(){
  const items = GROUPS[currentG] || [];
  renderBadge(items);
  timeline.innerHTML = items.map(i=>{
    const color = COLORS[i.k] || "bg-slate-200 text-slate-900";
    const tag = `<span class="inline-flex items-center px-2 py-0.5 rounded ${color} text-[11px] font-semibold">${i.k}</span>`;
    const actionBtn = i.link
      ? `<button onclick="openPdf('${i.link}')"
                class="px-3 py-2 rounded-xl bg-blue-600 text-white text-xs font-semibold">
            Open SIM brochure (EN)
        </button>`
      : `<button class="px-3 py-2 rounded-xl bg-slate-900 text-white text-xs font-semibold">Details</button>`;
    return `
    <article class="rounded-2xl ring-1 ring-slate-200 bg-white p-3">
      <div class="flex gap-3">
        <!-- ÏãúÍ∞Ñ -->
        <div class="flex-shrink-0 w-24 text-center">
          <div class="text-[11px] uppercase tracking-wide text-slate-500">Time</div>
          <div class="mt-0.5 text-lg font-bold">${i.t}</div>
        </div>
        <!-- ÎÇ¥Ïö© -->
        <div class="flex-1">
          <div class="flex items-center gap-2">
            ${tag}
            <h3 class="text-sm font-semibold">${i.title}</h3>
          </div>
          <p class="mt-1 text-[13px] text-slate-700">${i.act}</p>
          <div class="mt-2 flex items-center gap-2">
            ${actionBtn}
            <button class="px-3 py-2 rounded-xl bg-slate-100 text-slate-700 text-xs font-medium">Open map</button>
          </div>
        </div>
      </div>
    </article>`;
  }).join("");
}

/* ---------- 3) Ïù¥Î≤§Ìä∏/Î™®Îã¨ ---------- */

document.getElementById("closeDay1").addEventListener("click", ()=> closeModal());
document.getElementById("closeBackdrop").addEventListener("click", ()=> closeModal());
function closeModal(){
  const m = document.getElementById("day1Modal");
  m.classList.add("hidden"); m.classList.remove("flex");

  // ‚úÖ Îí§Î°úÍ∞à Ïù¥Î†•Ïù¥ ÏûàÏúºÎ©¥ back, ÏóÜÏúºÎ©¥ indexÎ°ú Ïù¥Îèô
  if (window.history.length > 1) {
    setTimeout(()=> history.back(), 0);
  } else {
    window.location.href = "index.html";
  }
}
document.addEventListener("keydown", (e)=>{
  if(e.key==="Escape") closeModal();
});

document.querySelectorAll(".gbtn").forEach(b=>{
  b.addEventListener("click", ()=>{
    currentG = b.dataset.g;
    localStorage.setItem("day1_group", currentG);
    setActiveGroupUI();
    renderTimeline();
  });
});

/* Ï¥àÍ∏∞ ÏÉÅÌÉú(Î™®Îã¨ Ïó¥Í∏∞ Ï†ÑÏóê ÏÑ†ÌÉù ÏÉÅÌÉú Ïú†ÏßÄ) */
setActiveGroupUI();

// ÌéòÏù¥ÏßÄ ÏßÑÏûÖ Ïãú ÏûêÎèôÏúºÎ°ú Î™®Îã¨ Ïó¥Í∏∞ + ÌÉÄÏûÑÎùºÏù∏ Î†åÎçî
document.addEventListener("DOMContentLoaded", () => {
  const modal = document.getElementById("day1Modal");
  if (modal) {
    modal.classList.remove("hidden");
    modal.classList.add("flex");
  }
  if (typeof setActiveGroupUI === "function") setActiveGroupUI();
  if (typeof renderTimeline === "function") renderTimeline();
});

// (ÏÑ†ÌÉù) ÌòπÏãú ÎÇ®ÏïÑÏûàÏùÑ Ïàò ÏûàÎäî openDay1 Ìï∏Îì§Îü¨Îäî ÏïàÏ†Ñ Í∞ÄÎìú
const openBtn = document.getElementById("openDay1");
if (openBtn) {
  openBtn.addEventListener("click", ()=>{
    const m = document.getElementById("day1Modal");
    if (m){ m.classList.remove("hidden"); m.classList.add("flex"); }
    setActiveGroupUI?.(); renderTimeline?.();
  });
}
</script>

<!-- ===== PDF Viewer Modal (suwon.html ÎÇ¥Î∂Ä) ===== -->
<div id="pdfModal"
     class="fixed inset-0 hidden z-[9999] items-center justify-center bg-black/70">
  <div class="relative w-[92vw] h-[88vh] bg-white rounded-xl overflow-hidden shadow-2xl">
    <button type="button"
            onclick="closePdf()"
            class="absolute top-2 right-2 z-10 px-3 py-1.5 rounded-lg bg-black/70 text-white text-sm">
      Close
    </button>
    <iframe id="pdfFrame" class="w-full h-full border-0" allow="autoplay"></iframe>
  </div>
</div>

<script>
  // === ÎÑ§Í∞Ä Ï§Ä Î°úÏßÅ Í∑∏ÎåÄÎ°ú: Î™®Î∞îÏùºÏùÄ GDocs, Îç∞Ïä§ÌÅ¨ÌÜ±ÏùÄ ÎÑ§Ïù¥Ìã∞Î∏å‚ÜíÌè¥Î∞± ===
  function openPdf(src) {
    try {
      const abs = new URL(src, location.href).href; // Ï†àÎåÄÍ≤ΩÎ°ú
      const frame = document.getElementById('pdfFrame');
      const ua = navigator.userAgent || '';
      const isMobile = /Android|iPhone|iPad|iPod|SamsungBrowser|CriOS/i.test(ua);

      // 1) Î™®Î∞îÏùº: Î∞îÎ°ú GDocs ViewerÎ°ú
      if (isMobile) {
        frame.src = 'https://docs.google.com/gview?embedded=1&url=' + encodeURIComponent(abs);
        document.getElementById('pdfModal').classList.remove('hidden');
        document.getElementById('pdfModal').classList.add('flex');
        return;
      }

      // 2) Îç∞Ïä§ÌÅ¨ÌÜ±: Î®ºÏ†Ä ÎÑ§Ïù¥Ìã∞Î∏åÎ°ú ÏãúÎèÑ, 1.2Ï¥à ÏïàÏóê Ï†úÎåÄÎ°ú Ïïà Îú®Î©¥ GDocsÎ°ú Ìè¥Î∞±
      frame.src = abs;
      document.getElementById('pdfModal').classList.remove('hidden');
      document.getElementById('pdfModal').classList.add('flex');

      const t = setTimeout(() => {
        if (!frame.src.includes('docs.google.com/gview')) {
          frame.src = 'https://docs.google.com/gview?embedded=1&url=' + encodeURIComponent(abs);
        }
      }, 1200);

      frame.onload = () => clearTimeout(t);
    } catch (e) {
      alert('PDFÎ•º Ïó¥ Ïàò ÏóÜÏäµÎãàÎã§. Í≤ΩÎ°úÎ•º ÌôïÏù∏Ìï¥ Ï£ºÏÑ∏Ïöî.');
    }
  }

  function closePdf() {
    const modal = document.getElementById('pdfModal');
    modal.classList.add('hidden');
    modal.classList.remove('flex');
    document.getElementById('pdfFrame').src = 'about:blank';
  }

  // Î∞îÍπ• ÏòÅÏó≠ ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
  document.getElementById('pdfModal').addEventListener('click', (e) => {
    if (e.target.id === 'pdfModal') closePdf();
  });
</script>

</body>
</html>
